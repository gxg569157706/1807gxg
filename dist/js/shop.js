require(["config"],function(){require(["header","footer","jquery","template","jquerycookie"],function(t,e,a,c){a("header").load("/html/component/header.html",function(){t.nav()});var r=a.cookie("user");r&&(a(".user").html("["+r+"]"),a(".loginbar").css("display","none"),a(".user").css("display","inline-block"),a(".userOut").css("display","inline-block")),a(".userOut").click(function(){a.cookie("user","",{expires:-1,path:"/"}),a(".loginbar").css("display","inline-block"),a(".user").css("display","none"),a(".userOut").css("display","none")});var n=location.search.slice(1).split("=");({})[n[0]]=n[1],a.cookie.json=!0;var o=this.products=a.cookie("cart")||[],i=c("shop-template",{products:o});function l(){var c=0;a(".cart-select:checked").each(function(t,e){c+=Number(a(this).parents(".cart-list").find(".cart-count").text())}),a(".cart-sum").text(c)}a(".ul-cal").html(i),a(".cart-operation").on("click",".cart-del",function(t){var e=t.target,c=a(e).parents(".cart-list"),r=c.find(".cart-id").text();o=o.filter(function(t){return!(t.id==r)}),a.cookie("cart",o,{expires:10,path:"/"}),c.remove(),l(),0===o.length?a(".hidd").show():a(".hidd").hide()}),a(".cart-num").on("click",".jia,.jian",function(t){var e=t.target,c=a(e).parents(".cart-list"),r=c.find(".cart-id").text();console.log(o);var n=o.filter(function(t){return t.id==r})[0];if(console.log(n),a(e).is(".jian")){if(n.amount<=1)return;n.amount--}else n.amount++;a.cookie("cart",o,{expires:10,path:"/"}),c.find("#cart-call").val(n.amount),c.find(".cart-count").text(n.amount*n.price),l()}),a(".cart-num").on("blur","#cart-call",function(t){var e=t.target,c=a(e).parents(".cart-list"),r=c.find(".cart-id").text(),n=o.filter(function(t){return r==t.id})[0],i=a(e).val();n.amount=i,a.cookie("cart",o,{expires:10,path:"/"}),c.find(".cart-count").text(n.amount*n.price),l()}),a(".checked-all").click(function(t){var e=a(t.target).prop("checked");a(".cart-select").prop("checked",e),l()}),a(".cart-list").on("click",".cart-select",function(t){var e=a(".cart-select:checked").length;a(".checked-all").prop("checked",e===o.length),l()}),a(".cart-final").click(function(){return alert("没钱,滚吧！"),!1}),a("footer").load("/html/component/footer.html",function(){e.nav()})})});