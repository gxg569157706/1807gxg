require(["config"],function(){require(["header","footer","jquery","template","jquerycookie"],function(t,e,a,i){a("header").load("/html/component/header.html",function(){t.nav()});var o=location.search.slice(1).split("="),c={};c[o[0]]=o[1],a.ajax({method:"get",data:c,url:"http://localhost/second/gxg-server/cart.php",dataType:"json",success:function(t){console.log(t);var e=i("cart-template",{cart:t.cart});a(".ul-cart").html(e)},complete:function(){a(".big-pic").mousemove(function(t){var e=t.pageX-a("#big-Img").offset().left-a("#fdj").width()/2,i=t.pageY-a("#big-Img").offset().top-a("#fdj").height()/2;e<0&&(e=0),i<0&&(i=0),e>a("#big-Img").width()-a("#fdj").width()&&(e=a("#big-Img").width()-a("#fdj").width()),i>a("#big-Img").height()-a("#fdj").height()&&(i=a("#big-Img").height()-a("#fdj").height()),a("#fdj").css("display","block"),a(".bigB").css("display","block"),a("#fdj").css({left:e,top:i});var o=a("#bigImg").width()/a("#big-Img").width(),c=a("#bigImg").height()/a("#big-Img").height();a("#bigImg").css({left:-e*o,top:-i*c})}),a(".big-pic").mouseout(function(t){a("#fdj").css("display","none"),a(".bigB").css("display","none")}),a("#add-c").click(function(t){var e={id:a(".cart-id").text(),name:a(".cart-name").text(),img:a(".small-pic img").attr("src"),price:a("#price").text(),amount:1};a.cookie.json=!0;var i=a.cookie("cart")||[];i.some(function(t){return t.id==e.id&&(t.amount++,!0)})||i.push(e),a.cookie("cart",i,{expires:10,path:"/"});var o=a.cookie("cart");console.log(o),alert("成功加入购物车！")}),a("#collect-c").click(function(){location.href="http://localhost:8888/html/shop.html"}),a(".ul-size").on("click",".ul-size li",function(t){var e=t.target;a(e).css("background","#444")})}}),a("footer").load("/html/component/footer.html",function(){e.nav()})})});